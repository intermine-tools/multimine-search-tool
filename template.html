<table class="table keyword-search-results">
    <thead>
      <tr>
        <th>Result type
          <div><small class="text-muted" alt="relevance">Relevance&nbsp;score</small></div>
        </th>
        <th>Source</th>
        <th>Name</th>
        <th>Result summary</th>
      </tr>
      <tr>
          <td colspan="4" ng-hide="state.results.length || !complete">
            <div class="alert alert-info">
              <strong>Sorry</strong> no results matched your search terms.
            </div>
          </td>
          <td colspan="4" ng-show="showFailed && failed > 0">
            <div class="alert alert-warning">
              <span ng-click="showFailed = false" class="close">dismiss</span>
              We did not receive a response from {{ failed }} sources.
            </div>
          </td>
          <td colspan="4" ng-hide="complete || !step.data.searchTerm">
            <div class="progress progress-striped">
              <div class="progress-bar progress-bar-success"
                   role="progressbar" aria-valuenow="{{percentDone}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percentDone}}%">
                  <span class="sr-only">{{percentDone}}% Complete (success)</span>
              </div>
            </div>
          </td>
      </tr>
    </thead>
    <tr ng-controller="RowController as row"
        ng-repeat="result in state.results | orderBy:'-relevance' | limitTo:25" ng-click="result.selected = !result.selected">
        <!-- TODO: separate selection and collapse -->
        <td>
            <i class="fa" ng-class="{'fa-bookmark': result.selected, 'fa-bookmark-o': !result.selected}"></i>
            <strong>{{ row.getTypeName(result) }}</strong>
            <div><small class="text-muted" alt="relevance">{{ result.relevance }}</small></div>
        </td>
        <td class="mineName">
            {{result.mine.name}}
        </td>
        <td class="resultName">
          {{row.getObjectName(result)}}
        </td>
        <td class="resultSummary">
            <div class="summary-fields" ng-hide="result.selected">
                <span bind-once class="summary-value"
                      ng-if="(summaryValue.value != null)"
                      ng-class="{matched: termMatched(summaryValue.value)}"
                      ng-repeat="summaryValue in result.summaryValues">
                    {{summaryValue.value | limitTo:50 }}
                </span>
            </div>
            <table class="table table-bordered table-hover table-condensed" ng-show="result.selected">
                <tr ng-repeat="(field, value) in result.fields">
                    <td class="field-name">
                      <em>{{row.getFieldName(field)}}</em>
                    </td>
                    <td ng-class="{active: termMatched(value)}">{{value}}</td>
            </table>
        </td>
    </tr>
</table>
